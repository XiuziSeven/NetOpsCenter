(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-351e84c6"],{"6da4":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var i=n("b775");function r(e){return Object(i["a"])({url:"/confbak/"+e,method:"get"})}function a(e,t){return Object(i["a"])({url:"/confbak/"+e+"/"+t,method:"get"})}function c(e){return Object(i["a"])({url:"/confbak/",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/findmac/",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/findmacchangeinterface/",method:"post",data:e})}},"6ef2":function(e,t,n){"use strict";n("a59e")},"7db0":function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").find,a=n("44d2"),c=n("ae40"),o="find",u=!0,l=c(o);o in[]&&Array(1)[o]((function(){u=!1})),i({target:"Array",proto:!0,forced:u||!l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},a59e:function(e,t,n){},ad8f:function(e,t,n){"use strict";n.d(t,"s",(function(){return r})),n.d(t,"m",(function(){return a})),n.d(t,"t",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"n",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"o",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"p",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"q",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"j",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"k",(function(){return k})),n.d(t,"v",(function(){return j})),n.d(t,"u",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"r",(function(){return _})),n.d(t,"f",(function(){return w})),n.d(t,"l",(function(){return x})),n.d(t,"w",(function(){return L}));var i=n("b775");function r(e){return Object(i["a"])({url:"/devices/",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/devices/"+e+"/",method:"delete"})}function c(e,t){return Object(i["a"])({url:"/devices/"+e+"/",method:"patch",data:t})}function o(e){return Object(i["a"])({url:"/devices/",method:"post",data:e})}function u(){return Object(i["a"])({url:"/area/",method:"get"})}function l(e){return Object(i["a"])({url:"/area/",method:"post",data:e})}function d(){return Object(i["a"])({url:"/devicebrand/",method:"get"})}function s(e){return Object(i["a"])({url:"/devicebrand/",method:"post",data:e})}function f(){return Object(i["a"])({url:"/devicetype/",method:"get"})}function b(e){return Object(i["a"])({url:"/devicetype/",method:"post",data:e})}function p(){return Object(i["a"])({url:"/deviceuser/",method:"get"})}function g(e){return Object(i["a"])({url:"/deviceuser/",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/devicetype/"+e+"/",method:"delete"})}function m(e){return Object(i["a"])({url:"/area/"+e+"/",method:"delete"})}function v(e){return Object(i["a"])({url:"/devicebrand/"+e+"/",method:"delete"})}function k(e){return Object(i["a"])({url:"/deviceuser/"+e+"/",method:"delete"})}function j(e,t){return Object(i["a"])({url:"/deviceuser/"+e+"/",method:"patch",data:t})}function y(e,t){return Object(i["a"])({url:"/devicebrand/"+e+"/",method:"patch",data:t})}function O(e){return Object(i["a"])({url:"/autoconfig/",method:"post",data:e})}function _(){return Object(i["a"])({url:"/devicesgroup/",method:"get"})}function w(e){return Object(i["a"])({url:"/devicesgroup/",method:"post",data:e})}function x(e){return Object(i["a"])({url:"/devicesgroup/"+e+"/",method:"delete"})}function L(e,t){return Object(i["a"])({url:"/devicesgroup/"+e+"/",method:"patch",data:t})}},f4ba:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.config_backup,callback:function(t){e.config_backup=t},expression:"config_backup"}},[n("el-tab-pane",{attrs:{label:"备份查询",name:"first"}},[n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"设备列表","default-first-option":"",size:"small"},model:{value:e.direcroty,callback:function(t){e.direcroty=t},expression:"direcroty"}},e._l(e.deviceslist,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"("+e.ip+")",value:e.id}})})),1),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getConfbakList()}}},[e._v("查询")]),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{display:"inline-block"},attrs:{type:"success",size:"mini",icon:"el-icon-caret-right"},on:{click:function(t){return e.confBak()}}},[e._v("立即备份")]),n("span",{staticStyle:{color:"red","font-size":"mini"}},[e._v("*注意：目前只支持H3C/华为/juniper")]),n("el-container",[n("el-aside",{attrs:{width:"15%"}},[n("el-table",{staticStyle:{width:"100%",height:"75vh",overflow:"auto","justify-content":"center"},attrs:{data:e.logs}},[n("el-table-column",{attrs:{prop:"name",label:"配置列表",clickable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"button-flex",attrs:{type:"text",title:t.row.name},on:{click:function(n){return e.getConfbakDetail(t.row.name)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])})],1)],1),n("el-main",[e._v(" log："+e._s(e.filename)+" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:30,maxRows:30},readonly:""},model:{value:e.logdetail,callback:function(t){e.logdetail=t},expression:"logdetail"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"批量备份",name:"second"}},[n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"设备组列表","default-first-option":"",size:"small"},model:{value:e.devicegroupid,callback:function(t){e.devicegroupid=t},expression:"devicegroupid"}},e._l(e.devicesgrouplist,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{display:"inline-block"},attrs:{type:"success",size:"mini",icon:"el-icon-caret-right",text:e.loadingText},on:{click:function(t){return e.confBak2()}}},[e._v("立即备份")]),n("br"),n("el-input",{staticStyle:{width:"30%"},attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},readonly:""},model:{value:e.log_batch,callback:function(t){e.log_batch=t},expression:"log_batch"}})],1)],1)],1)},r=[],a=(n("7db0"),n("d3b7"),n("ad8f")),c=n("6da4"),o={data:function(){return{devicesgrouplist:"",devicegroupid:"",loading:!1,fullscreenLoading:!1,logdetail:"",log_batch:"",config_backup:"first",logs:[],deviceslist:"",direcroty:"",direcrotybak:"",filename:"",loadingText:"加载中...",params:{page:1,page_size:999,search:"",device_brand_id:""}}},created:function(){this.getDevicesList(),this.getDevicesGroupList()},methods:{handleClick:function(e,t){},getDevicesList:function(){var e=this;Object(a["s"])(this.params).then((function(t){e.deviceslist=t.data.results}))},getConfbakList:function(){var e=this,t=this.deviceslist.find((function(t){return t.id===e.direcroty})).ip;Object(c["e"])(t).then((function(n){e.logs=n.data,e.direcrotybak=t}))},getConfbakDetail:function(e){var t=this;Object(c["d"])(this.direcrotybak,e).then((function(n){t.logdetail=n.data,t.filename=e}))},confBak:function(){var e=this,t={deviceid:[this.direcroty],backtype:"OT"};this.fullscreenLoading=!0,Object(c["a"])(t).then((function(t){e.$message({message:t.data.message,type:t.data.status}),e.fullscreenLoading=!1})).catch((function(){e.fullscreenLoading=!1}))},confBak2:function(){var e=this,t={devicegroupid:this.devicegroupid,backtype:"OT"};this.fullscreenLoading=!0,Object(c["a"])(t).then((function(t){console.log("1111111111",t),e.$message({message:t.data.message,type:t.data.status}),e.log_batch=t.data.log,e.fullscreenLoading=!1})).catch((function(){e.fullscreenLoading=!1}))},getDevicesGroupList:function(){var e=this;Object(a["r"])(this.params).then((function(t){e.devicesgrouplist=t.data}))}}},u=o,l=(n("6ef2"),n("2877")),d=Object(l["a"])(u,i,r,!1,null,null,null);t["default"]=d.exports}}]);